!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);const r="https://thinkful-list-api.herokuapp.com/meet/Bookmarks",i=function(...t){let n;return fetch(...t).then(t=>t.ok||(n={code:t.status},t.headers.get("Content-Type").includes("json"))?t.json():(n.message=t.statusText,Promise.reject(n))).then(t=>t).catch(t=>t)};var a=r,o=function(){return i(r)},l=i;var d={bookmarks:[],error:null,adding:!1,filter:0,findById:function(t){return this.bookmarks.find(n=>n.id===t)},addBookmark:function(t){this.bookmarks.push(t)},findAndDelete:function(t){this.bookmarks=this.bookmarks.filter(n=>n.id!==t)},findAndUpdate:function(t,n){const e=this.findById(t);Object.assign(e,n)}};const s={method:"POST",headers:{"Content-Type":"application/json"}},p=function(){$("main").on("change","#filter",(function(t){t.preventDefault();let n=$(this).val();h.renderStartTemplate(),d.bookmarks.forEach(t=>{(t.rating>=n[0]||"unfiltered"===n)&&h.renderViewTemplate(t)})}))};var u=function(){$("main").on("click",".add-bookmark",(function(t){t.preventDefault(),h.renderAddBookmarkTemplate()}))},c=function(){$("main").on("click","#create-bookmark",(function(t){let n=$("#siteName").val(),e=$("#siteURL").val(),r=$("#rating").val(),i=$("#description").val();if(n&&e&&e.length>=5&&e.includes("http")){t.preventDefault();let o={};o.title=n,o.url=e,r&&(o.rating=r),i&&(o.desc=i),s.body=JSON.stringify(o),l(a,s).then(t=>{t.message?h.renderErrorTemplate(t):(t.expanding=!1,d.bookmarks.push(t),h.renderStartTemplate(),d.bookmarks.forEach(t=>{h.renderViewTemplate(t)}))})}}))},m=function(){$("main").on("click","#bookmark-title",(function(t){t.preventDefault();let n=$(t.currentTarget).text();d.bookmarks.forEach(t=>{t.title===n&&(t.expanding=!0)}),$("main").html(""),h.renderStartTemplate(),d.bookmarks.forEach(t=>{h.renderViewTemplate(t)}),d.bookmarks.forEach(t=>{t.expanding&&(t.expanding=!1)})}))},f=function(){$("main").on("click","#delete-bookmark",(function(t){t.preventDefault();let n=$(t.currentTarget).parent().attr("id"),e=d.bookmarks.filter(t=>t.id!==n);d.bookmarks=e,l(`${a}/${n}`,{method:"DELETE"}),h.renderStartTemplate(),d.bookmarks.forEach(t=>{h.renderViewTemplate(t)})}))},b=function(){$("main").on("click","#cancel",(function(t){t.preventDefault(),h.renderStartTemplate(),o().then(t=>{t.forEach(t=>{h.renderViewTemplate(t)})})}))},k=p;let v="";var h={renderStartTemplate:function(){v='<div class="header clearfix">\n                <h1 class="text-muted">Bookmarker</h1>\n            </div>\n            <div class="jumbotron"> \n            \n            <form>\n                <button id="add" type="submit" class="btn btn-primary add-bookmark">Add +</button>\n                <select id="filter" name="filter" class="btn btn-primary">\n                    <option value="filter">Filter by</option>\n                    <option value="1-star" id="1">1 Star</option>\n                    <option value="2-star" id="2" >2 Star</option>\n                    <option value="3-star" id="3" >3 Star</option>\n                    <option value="4-star" id="4">4 Star</option>\n                    <option value="5-star" id="5">5 Star</option>\n                    <option value="unfiltered" id="unfiltered">All</option>\n                </select>\n            </form>\n            <h2 class="display-3">Bookmark your favorite sites</h2>\n            </div>\n            \n            ',$("main").html(v)},renderAddBookmarkTemplate:function(){v=' <div class="header clearfix">\n                <h3 class="text-muted">Bookmarker</h3>\n            </div>\n\n            <div class="jumbotron">\n                \n                <form>\n                    <button id="add" type="submit" class="btn btn-primary">Add +</button>\n                    <select id="filter" name="filter" class="btn btn-primary">\n                        <option value="filter">Filter by</option>\n                        <option value="1-star">1 Star</option>\n                        <option value="2-star">2 Star</option>\n                        <option value="3-star">3 Star</option>\n                        <option value="4-star">4 Star</option>\n                        <option value="5-star">5 Star</option>\n                        <option value="unfiltered" >All</option>\n                        \n                    </select>\n                    <div>\n                        <label for="siteName">Site Name</label>\n                        <br>\n                        <input type="text" id="siteName"  required minlength="1"/>\n                        <br>\n                    </div>\n                    <div>\n                        <label for="siteURL">Site URL(must begin with http:// or https://)</label>\n                        <br>\n                        <input type="url" id="siteURL" minlength="5" required pattern="https://.*|http://.*" />\n                        <br>\n                    </div>\n                    <div>\n                        <label for="rating">Rating(optional 1-5)</label>\n                        <br>\n                        <input type="number" max="5" min="1" id="rating">\n                        <br>\n                    </div>\n                    <div>\n                        <label for="description">Description(optional)</label>\n                        <br>\n                        <input type="text" id="description" minlength="1" placeholder="Describe the site">\n                        <br>\n                    </div>\n                    <br>\n                    <button id="create-bookmark" type="submit" class="btn btn-primary">Submit</button>\n                    <button type="submit" class="btn btn-primary" id="cancel">Cancel</button>\n                \n                </form>\n            </div>',$("main").html(v)},renderViewTemplate:function(t){v=t.expanding?function(t){let n="",e="";return e=t.rating?`<p>${t.rating} star</p>`:"<p>Not rated</p>",n=t.desc?`<p>${t.desc}</p>`:"<p>Description not available</p>",`<div class="row marketing">\n    <div class="col-lg-12">\n        \n            <div class="well" id="${t.id}">\n                <p>${t.title}</p>\n                ${e}\n                ${n}\n                <a class="btn btn-default" target="_blank" href="${t.url}">Visit</a>\n                <a class="btn btn-danger" id="delete-bookmark"  href="#">Delete</a>\n               \n                \n            </div>\n        \n    </div>`}(t):function(t){let n="";return n=t.rating?`<p>${t.rating} star</p>`:"<p>Not rated</p>",`<div class="row marketing">\n    <div class="col-lg-12">\n        <div id="bookmarks-added">\n            <div class="well">\n                <p><a href="" id="bookmark-title" class="btn btn-default">${t.title}</a></p>\n                ${n}\n            </div>\n        </div>\n    </div>\n\n\n\n\n</div>`}(t),$("main").append(v)},renderErrorTemplate:function(t){v=function(t){return`<h2 style="text-align:center; border: solid 2px red">${t.message}</h2>\n            <form>\n                <button id="add" type="submit" class="btn btn-primary add-bookmark">Try again</button>\n            </form>`}(t),$("main").html(v)}};$((function(){h.renderStartTemplate(),u(),c(),o().then(t=>{t.forEach(t=>{t.expanding=!1,d.addBookmark(t),h.renderViewTemplate(t)})}),m(),f(),k(),b()}))}]);